(function(e,t,n,r){"use strict";Foundation.libs.forms={name:"forms",version:"4.2.1",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(t,n,r){typeof n=="object"&&e.extend(!0,this.settings,n);if(typeof n!="string"){this.settings.init||this.events();this.assemble();return this.settings.init}return this[n].call(this,r)},assemble:function(){e('form.custom input[type="radio"]',e(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup);e('form.custom input[type="checkbox"]',e(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup);e("form.custom select",e(this.scope)).not('[data-customforms="disabled"]').not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var r=this;e(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(t){t.preventDefault();t.stopPropagation();r.toggle_checkbox(e(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(t){t.preventDefault();t.stopPropagation();r.toggle_radio(e(this))}).on("change.fndtn.forms",'form.custom select:not([data-customforms="disabled"])',function(t,n){r.refresh_custom_select(e(this),n)}).on("click.fndtn.forms","form.custom label",function(t){if(e(t.target).is("label")){var n=e("#"+r.escape(e(this).attr("for"))+':not([data-customforms="disabled"])'),i,s;if(n.length!==0)if(n.attr("type")==="checkbox"){t.preventDefault();i=e(this).find("span.custom.checkbox");i.length==0&&(i=n.add(this).siblings("span.custom.checkbox").first());r.toggle_checkbox(i)}else if(n.attr("type")==="radio"){t.preventDefault();s=e(this).find("span.custom.radio");s.length==0&&(s=n.add(this).siblings("span.custom.radio").first());r.toggle_radio(s)}}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var n=e(this),s=n.closest("div.custom.dropdown"),o=i(s,"select");s.hasClass("open")||e(r.scope).trigger("click");t.preventDefault();if(!1===o.is(":disabled")){s.toggleClass("open");s.hasClass("open")?e(r.scope).on("click.fndtn.forms.customdropdown",function(){s.removeClass("open");e(r.scope).off(".fndtn.forms.customdropdown")}):e(r.scope).on(".fndtn.forms.customdropdown");return!1}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(t){var n=e(this),r=n.closest("div.custom.dropdown"),s=i(r,"select"),o=0;t.preventDefault();t.stopPropagation();if(!e(this).hasClass("disabled")){e("div.dropdown").not(r).removeClass("open");var u=n.closest("ul").find("li.selected");u.removeClass("selected");n.addClass("selected");r.removeClass("open").find("a.current").text(n.text());n.closest("ul").find("li").each(function(e){n[0]==this&&(o=e)});s[0].selectedIndex=o;s.data("prevalue",u.html());s.trigger("change")}});e(t).on("keydown",function(t){var r=n.activeElement,i=Foundation.libs.forms,s=e(".custom.dropdown.open");if(s.length>0){t.preventDefault();t.which===13&&s.find("li.selected").trigger("click");t.which===27&&s.removeClass("open");if(t.which>=65&&t.which<=90){var o=i.go_to(s,t.which),u=s.find("li.selected");if(o){u.removeClass("selected");i.scrollTo(o.addClass("selected"),300)}}if(t.which===38){var u=s.find("li.selected"),a=u.prev(":not(.disabled)");if(a.length>0){a.parent()[0].scrollTop=a.parent().scrollTop()-i.outerHeight(a);u.removeClass("selected");a.addClass("selected")}}else if(t.which===40){var u=s.find("li.selected"),o=u.next(":not(.disabled)");if(o.length>0){o.parent()[0].scrollTop=o.parent().scrollTop()+i.outerHeight(o);u.removeClass("selected");o.addClass("selected")}}}});this.settings.init=!0},go_to:function(e,t){var n=e.find("li"),r=n.length;if(r>0)for(var i=0;i<r;i++){var s=n.eq(i).text().charAt(0).toLowerCase();if(s===String.fromCharCode(t).toLowerCase())return n.eq(i)}},scrollTo:function(e,t){if(t<0)return;var n=e.parent(),r=this.outerHeight(e),i=r*e.index()-n.scrollTop(),s=i/t*10;this.scrollToTimerCache=setTimeout(function(){if(!isNaN(parseInt(s,10))){n[0].scrollTop=n.scrollTop()+s;this.scrollTo(e,t-10)}}.bind(this),10)},append_custom_markup:function(t,n){var r=e(n),i=r.attr("type"),s=r.next("span.custom."+i);s.length===0&&(s=e('<span class="custom '+i+'"></span>').insertAfter(r));s.toggleClass("checked",r.is(":checked"));s.toggleClass("disabled",r.is(":disabled"))},append_custom_select:function(t,n){var r=Foundation.libs.forms,i=e(n),s=i.next("div.custom.dropdown"),o=s.find("ul"),u=s.find(".current"),a=s.find(".selector"),f=i.find("option"),l=f.filter(":selected"),c=i.attr("class")?i.attr("class").split(" "):[],h=0,p="",d,v=!1;if(i.hasClass(r.settings.disable_class))return;if(s.length===0){var m=i.hasClass("small")?"small":i.hasClass("medium")?"medium":i.hasClass("large")?"large":i.hasClass("expand")?"expand":"";s=e('<div class="'+["custom","dropdown",m].concat(c).filter(function(e,t,n){return e==""?!1:n.indexOf(e)==t}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>');a=s.find(".selector");o=s.find("ul");p=f.map(function(){var t=e(this).attr("class")?e(this).attr("class"):"";return"<li class='"+t+"'>"+e(this).html()+"</li>"}).get().join("");o.append(p);v=s.prepend('<a href="#" class="current">'+l.html()+"</a>").find(".current");i.after(s).addClass("hidden-field")}else{p=f.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join("");o.html("").append(p)}r.assign_id(i,s);s.toggleClass("disabled",i.is(":disabled"));d=o.find("li");r.cache[s.data("id")]=d.length;f.each(function(t){if(this.selected){d.eq(t).addClass("selected");v&&v.html(e(this).html())}e(this).is(":disabled")&&d.eq(t).addClass("disabled")});if(!s.is(".small, .medium, .large, .expand")){s.addClass("open");var r=Foundation.libs.forms;r.hidden_fix.adjust(o);h=r.outerWidth(d)>h?r.outerWidth(d):h;Foundation.libs.forms.hidden_fix.reset();s.removeClass("open")}},assign_id:function(e,t){var n=[+(new Date),Foundation.random_str(5)].join("-");e.attr("data-id",n);t.attr("data-id",n)},refresh_custom_select:function(t,n){var r=this,i=0,s=t.next(),o=t.find("option"),u=s.find("li");if(u.length!=this.cache[s.data("id")]||n){s.find("ul").html("");o.each(function(){var t=e("<li>"+e(this).html()+"</li>");s.find("ul").append(t)});o.each(function(t){if(this.selected){s.find("li").eq(t).addClass("selected");s.find(".current").html(e(this).html())}e(this).is(":disabled")&&s.find("li").eq(t).addClass("disabled")});s.removeAttr("style").find("ul").removeAttr("style");s.find("li").each(function(){s.addClass("open");r.outerWidth(e(this))>i&&(i=r.outerWidth(e(this)));s.removeClass("open")});u=s.find("li");this.cache[s.data("id")]=u.length}},toggle_checkbox:function(e){var t=e.prev(),n=t[0];if(!1===t.is(":disabled")){n.checked=n.checked?!1:!0;e.toggleClass("checked");t.trigger("change")}},toggle_radio:function(e){var t=e.prev(),n=t.closest("form.custom"),r=t[0];if(!1===t.is(":disabled")){n.find('input[type="radio"][name="'+this.escape(t.attr("name"))+'"]').next().not(e).removeClass("checked");e.hasClass("checked")||e.toggleClass("checked");r.checked=e.hasClass("checked");t.trigger("change")}},escape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(t){var n=this;n.hidden=t.parents();n.hidden=n.hidden.add(t).filter(":hidden");n.hidden.each(function(){var t=e(this);n.tmp.push(t.attr("style"));t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(n){var i=e(this),s=t.tmp[n];s===r?i.removeAttr("style"):i.attr("style",s)});t.tmp=[];t.hidden=null}},off:function(){e(this.scope).off(".fndtn.forms")},reflow:function(){}};var i=function(t,n){var t=t.prev();while(t.length){if(t.is(n))return t;t=t.prev()}return e()}})(Foundation.zj,this,this.document);